console.log("%cðŸš€ v4.0 STARTED","color: green; font-size: 20px");const t="clips_v4";chrome.runtime.onMessage.addListener((e,r,c)=>{if(console.log("ðŸ“¨ v4.0 Message:",e.type),e.type==="SAVE")return chrome.storage.local.get(t,n=>{const o=n[t]||[],l={id:Date.now().toString(),content:e.content,timestamp:Date.now(),domain:e.domain,title:e.title,url:e.url};o.unshift(l),chrome.storage.local.set({[t]:o},()=>{console.log("âœ… v4.0 Saved! Total:",o.length),c({ok:!0}),chrome.runtime.sendMessage({type:"REFRESH"}).catch(()=>{})})}),!0;if(e.type==="GET")return chrome.storage.local.get(t,n=>{const o=n[t]||[];console.log("ðŸ“¤ v4.0 Sending:",o.length,"clips"),c({clips:o})}),!0;if(e.type==="DELETE")return chrome.storage.local.get(t,n=>{const o=(n[t]||[]).filter(l=>l.id!==e.id);chrome.storage.local.set({[t]:o},()=>{c({ok:!0})})}),!0});chrome.action.onClicked.addListener(e=>{e.windowId&&chrome.sidePanel.open({windowId:e.windowId})});
